
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Clicon</title>
<meta name="keywords" content="HTML5 Template">
<meta name="description" content="Molla - Bootstrap eCommerce Template">
<meta name="author" content="p-themes">
<!-- Favicon -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

<link rel="apple-touch-icon" sizes="180x180" href="assets/images/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/images/icons/favicon-16x16.png">
<link rel="manifest" href="assets/images/icons/site.html">
<link rel="mask-icon" href="assets/images/icons/safari-pinned-tab.svg" color="#666666">
<link rel="shortcut icon" href="assets/images/icons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Molla">
<meta name="application-name" content="Molla">
<meta name="msapplication-TileColor" content="#cc9966">
<meta name="msapplication-config" content="assets/images/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<!-- Plugins CSS File -->

<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
<!-- Main CSS File -->

<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/plugins/owl-carousel/owl.carousel.css">
<link rel="stylesheet" href="/assets/css/plugins/magnific-popup/magnific-popup.css">
<link rel="stylesheet" href="/assets/css/plugins/nouislider/nouislider.css">

<style>
/* Popup message styling */
.popup-message {
display: none; /* Initially hidden */
position: fixed;
bottom: 20px;
left: 50%;
transform: translateX(-50%);
background-color: #f44336; /* Red background */
color: white;
padding: 10px 20px;
border-radius: 5px;
font-size: 16px;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
opacity: 0;
transition: opacity 0.5s ease-in-out, bottom 0.5s ease-in-out;
z-index: 9999;
}

/* Show the popup */
.popup-message.show {
display: block;
opacity: 1;
bottom: 30px; /* Adjust position to appear above the bottom */
}

.filter-price {
padding: 15px;
background: #f8f9fa;
border-radius: 8px;
}

.price-inputs {
gap: 15px;
}

.price-input {
flex: 1;
}

.price-input label {
display: block;
margin-bottom: 5px;
font-size: 14px;
color: #666;
}

.price-input .input-group {
width: 100%;
}

.price-input input {
text-align: right;
padding-right: 8px;
}

#apply-price {
background-color: #39f;
border: none;
padding: 5px 15px;
transition: all 0.3s ease;
}

#apply-price:hover {
background-color: #007bff;
transform: translateY(-1px);
}

.price-input .input-group-text {
background-color: #e9ecef;
color: #495057;
border-right: none;
}

.price-input .form-control {
border-left: none;
}

/* Add focus styles */
.price-input .form-control:focus {
box-shadow: none;
border-color: #ced4da;
}

.pagination {
    margin-top: 20px;
  }
  .pagination a {
    padding: 8px 12px;
    margin: 0 5px;
    text-decoration: none;
    border: 1px solid #ddd;
    color: #333;
  }
  .pagination a.active {
    font-weight: bold;
    background-color: #007bff;
    color: white;
  }

.pagination-container {
    text-align: center;
    margin-top: 20px;
    position: relative;
    bottom: 0; /* Set to 0 to keep it at the bottom of the viewport */
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    width: 100%;
}

.pagination {
    display: inline-block;
}

.pagination a {
    padding: 8px 12px;
    margin: 0 5px;
    text-decoration: none;
    border: 1px solid #ddd;
    color: #333;
    border-radius: 4px;
    transition: background-color 0.3s, color 0.3s;
}

.pagination a:hover {
    background-color: #007bff;
    color: white;
}

.pagination a.active {
    font-weight: bold;
    background-color: #39f;
    color: white;
    border-color: #39f;
}

.pagination a.prev, .pagination a.next {
    font-weight: bold;
}
</style>

<div class="page-wrapper">
    <header class="header header-intro-clearance header-4">
        <div class="header-top">
            <div class="container">
                <div class="header-left">
                    <a href="tel:#"><i class="icon-phone"></i>Call: +0123 456 789</a>
                </div><!-- End .header-left -->

                <div class="header-right">

                    <ul class="top-menu">
                        <li>
                            <a href="#">Links</a>
                            <ul>
                                <li>
                                    <div class="header-dropdown">
                                        <a href="#">USD</a>
                                        <div class="header-menu">
                                            <ul>
                                                <!-- <li><a href="#">Eur</a></li>
                                                <li><a href="#">Usd</a></li> -->
                                            </ul>
                                        </div><!-- End .header-menu -->
                                    </div>
                                </li>
                                <li>
                                    <div class="header-dropdown">
                                        <a href="#">English</a>
                                        <div class="header-menu">
                                            <ul>
                                                <!-- <li><a href="#">English</a></li>
                                                <li><a href="#">French</a></li>
                                                <li><a href="#">Spanish</a></li> -->
                                            </ul>
                                        </div><!-- End .header-menu -->
                                    </div>
                                </li>
                                <!-- <% if(user){%>

                                    <li><a href="/logout">Logout</a></li>
                              <%  }else{%>

                                <li><a href="http://localhost:3000/signin">Sign in / Sign up</a></li>
                            <%  } %> -->
                            </ul>
                        </li>
                    </ul><!-- End .top-menu -->
                </div><!-- End .header-right -->

            </div><!-- End .container -->
        </div><!-- End .header-top -->

        <div class="header-middle">
            <div class="container">
                <div class="header-left">
                    <button class="mobile-menu-toggler">
                        <span class="sr-only">Toggle mobile menu</span>
                        <i class="icon-bars"></i>
                    </button>
                    
                    <a href="index.html" class="logo">
                       <h1>Clicon</h1>
                    </a>
                </div><!-- End .header-left -->

                <div class="header-center">
                    <div class="header-search header-search-extended header-search-visible d-none d-lg-block">
                        <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                        <form action="#" method="get">
                            <div class="header-search-wrapper search-wrapper-wide">
                                <label for="q" class="sr-only">Search</label>
                                <button class="btn btn-outline-dark-2" type="submit"><i class="icon-search"></i></button>
                                <input type="search" class="form-control" name="q" id="q" placeholder="Search product ..." required>
                            </div><!-- End .header-search-wrapper -->
                        </form>
                    </div><!-- End .header-search -->
                </div>

                 <div class="header-right">
                    <div class="compare-dropdown">
                        <a href="#" title="Compare Products" aria-label="Compare Products">
                            <div class="icon">
                                <i class="icon-random" style="font-size: 24px;"></i>
                            </div>
                            <p>Compare</p>
                        </a>
                    </div>
                    <!-- End .compare-dropdown -->

                    <div class="wishlist">
                        <a href="/wishlist" title="Wishlist">
                            <div class="icon">
                                <i class="icon-heart-o"></i>
                                
                            </div>
                            <p>Wishlist</p>
                        </a>
                    </div><!-- End .compare-dropdown -->

                    <div class="cart-dropdown">
                        <a href="/cart" class="dropdown-toggle" role="button" data-display="static">
                            <div class="icon">
                                <i class="icon-shopping-cart"></i>
                            </div>
                            <p>Cart</p>
                        </a>
                    </div><!-- End .cart-dropdown -->
                    


                   
                     

                </div>


            </div><!-- End .container -->
        </div><!-- End .header-middle -->

        <div class="header-bottom sticky-header">
            <div class="container">
                <div class="header-left">
                    
                </div>

                <div class="header-center">
                    <nav class="main-nav" style="display: flex; align-items: center;">
                        <ul class="menu" style="list-style: none; display: flex; align-items: center; margin: 0; padding: 0; width: 100%;">
                            <li  style="margin: 0 10px;">
                                <a href="/" class="sff-with-ul" style="text-decoration: none; color: #000; font-size: 16px;">Home</a>
                            </li>
                            <li style="margin: 0 10px;" class="megamenu-container active">
                                <a href="/productlist" class="sff-with-ul" style="text-decoration: none; color: #000; font-size: 16px;">Shop</a>
                            </li>
                            <li style="margin: 0 10px;">
                                <a href="blog.html" class="sff-with-ul" style="text-decoration: none; color: #000; font-size: 16px;">About</a>
                            </li>
                            <li style="margin: 0 10px;">
                                <a href="elements-list.html" class="sff-with-ul" style="text-decoration: none; color: #000; font-size: 16px;">Contact</a>
                            </li>
                           
                        </ul>
                    </nav>
                </div>

                
                <div class="header-right">
                    <i class="la la-lightbulb-o"></i><p>Clearance<span class="highlight">&nbsp;Up to 30% Off</span></p>
                </div>
            </div><!-- End .container -->
        </div><!-- End .header-bottom -->
    </header>

    <p id="maxcount" class="popup-message" ><%= message !== 'undefined' ? message :'' %></p>


    <main class="main">
        <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
            <div class="container">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="/productlist">Shop</a></li>
                </ol>
            </div>
        </nav>
    
        <div class="page-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-9">
                        <div class="toolbox">
                            <div class="toolbox-left">
                                <div class="toolbox-info">
                                    Showing <span id="product-count">9 of 56</span> Products
                                </div>
                            </div>
    
                            <div class="toolbox-right">
                                <div class="toolbox-sort">
                                    <label for="sortby">Sort by:</label>
                                    <div class="select-custom">
                                        <select name="sortby" id="sortby" class="form-control">
                                            <option value="az">A-Z</option>
                                            <option value="za">Z-A</option>
                                            <option value="price-low">Price: Low to High</option>
                                            <option value="price-high">Price: High to Low</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
    
                        <div class="products mb-3">
                            <div class="row justify-content-center" id="product-list">
                                <% product.forEach((product, index) => { %>
                                <div class="col-6 col-md-4 col-lg-4 col-xl-3 product-card" data-category="<%= product.category %>" data-name="<%= product.productname.toLowerCase() %>">
                                    <div class="product product-7 text-center">
                                        <figure class="product-media">
                                            <a href="http://localhost:3000/productview/<%= product._id %>">
                                                <img src="/uploads/<%=product.image[0] %>" alt="Product image" class="product-image">
                                            </a>
                                        </figure>

                                        <% 
                                          
                                        const originalPrice = parseFloat(product.price.replace(/,/g, '')) || 0; 
                                        const discountMatch = product.offer ? product.offer.match(/\d+/) : null;
                                        const discountPercentage = discountMatch ? parseFloat(discountMatch[0]) : 0; 
                                        const discountedPrice = originalPrice - (originalPrice * discountPercentage / 100);
                                    %>
    
                                        <div class="product-body">
                                            <div class="product-cat">
                                                <a href="#"><%= product.category %></a>
                                            </div>
                                            <h3 class="product-title">
                                                <a href="http://localhost:3000/productview/<%= product._id %>"><%= product.productname %></a>
                                            </h3>
                                            <div>
                                                <p><%= product.offer %></p>
                                            </div>
                                            <div class="product-price">
                                                <span style="text-decoration: line-through; color: red;">
                                                    <%= product.price %>
                                                </span>
                                                <span style="margin-left: 10px; font-weight: bold;">
                                                    <%= Math.floor(discountedPrice)  %>
                                                </span>
                                            </div>

                                            <div class="ratings-container">
                                                <div class="ratings">
                                                    <div class="ratings-val" style="width: <%= product.rating * 20 %>%;"></div>
                                                </div>
                                                <span class="ratings-text"><%= product.rating %> </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>
                            </div>

                            
                        </div>
                        
                        <div class="pagination-container">
                            <div class="pagination">
                                <% if (currentPage > 1) { %>
                                    <a href="?page=<%= currentPage - 1 %>&q=<%= searchQuery %>&category=<%= selectedCategories %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&sort=<%= sortOrder %>" class="prev">Previous</a>
                                <% } %>
                                
                                <% for (let i = 1; i <= totalPages; i++) { %>
                                    <a href="?page=<%= i %>&q=<%= searchQuery %>&category=<%= selectedCategories %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&sort=<%= sortOrder %>"
                                       class="<%= i === currentPage ? 'active' : '' %>">
                                        <%= i %>
                                    </a>
                                <% } %>
                                    
                                <% if (currentPage < totalPages) { %>
                                    <a href="?page=<%= currentPage + 1 %>&q=<%= searchQuery %>&category=<%= selectedCategories %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&sort=<%= sortOrder %>" class="next">Next</a>
                                <% } %>
                            </div>
                        </div>
                    </div>

                  
    
                    <aside class="col-lg-3 order-lg-first">
                        <div class="sidebar sidebar-shop">
                            <div class="widget widget-clean">
                                <label>Filters:</label>
                                <a href="#" class="sidebar-filter-clear" id="clear-filters">Clean All</a>
                            </div>
    
                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-1" role="button" aria-expanded="true">
                                        Category
                                    </a>
                                </h3>
                                <div class="collapse show" id="widget-1">
                                    <div class="widget-body">
                                        <div class="filter-items filter-items-count" style="margin-left: 30px;">
                                            <% category.forEach(category => { %>
                                                <div class="filter-item" style="line-height: 50px;">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input category-filter" id="cat-<%= category._id %>" value="<%= category.name %>">
                                                        <label class="custom-control-label" for="cat-<%= category._id %>"></label> <%= category.name %>
                                                    </div>
                                                </div>
                                            <% }) %>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                            <div class="widget widget-collapsible">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-2" role="button" aria-expanded="true">
                                        Price Range
                                    </a>
                                </h3>



                                <div class="collapse show" id="widget-2">
                                    <div class="widget-body">
                                        <div class="filter-price">
                                            <div class="price-inputs d-flex justify-content-between mb-3">
                                                <div class="price-input">
                                                    <label for="min-price">Min Price:</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">₹</span>
                                                        <input type="number" 
                                                               id="min-price" 
                                                               class="form-control" 
                                                               value="<%= minPrice || 0 %>"
                                                               min="0"
                                                               max="1000000"
                                                               step="100">
                                                    </div>
                                                </div>
                                                <div class="price-input">
                                                    <label for="max-price">Max Price:</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">₹</span>
                                                        <input type="number" 
                                                               id="max-price" 
                                                               class="form-control" 
                                                               value="<%= maxPrice || 1000000 %>"
                                                               min="0"
                                                               max="1000000"
                                                               step="100">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">Range: ₹0 - ₹10,00,000</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button id="apply-price" class="btn btn-sm btn-primary">Apply</button>



                            </div>
                        </div>

                        
                    </aside>


                    
                </div>
            </div>
        </div>
    </main>

    
    <div class="footer-middle">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-lg-3">
                    <div class="widget widget-about">
                        <h3 style="color: black;">
                            <i class="fas fa-gem"></i> Clicon
                          </h3>
                        <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. </p>

                        <div class="widget-call">
                            <i class="icon-phone"></i>
                            Got Question? Call us 24/7
                            <a href="tel:#">+0123 456 789</a>         
                        </div><!-- End .widget-call -->
                    </div><!-- End .widget about-widget -->
                </div><!-- End .col-sm-6 col-lg-3 -->

                <div class="col-sm-6 col-lg-3">
                    <div class="widget">
                        <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                        <ul class="widget-list">
                            <li><a href="about.html">About Molla</a></li>
                            <li><a href="#">Our Services</a></li>
                            <li><a href="#">How to shop on Molla</a></li>
                            <li><a href="faq.html">FAQ</a></li>
                            <li><a href="contact.html">Contact us</a></li>
                        </ul><!-- End .widget-list -->
                    </div><!-- End .widget -->
                </div><!-- End .col-sm-6 col-lg-3 -->

                <div class="col-sm-6 col-lg-3">
                    <div class="widget">
                        <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                        <ul class="widget-list">
                            <li><a href="#">Payment Methods</a></li>
                            <li><a href="#">Money-back guarantee!</a></li>
                            <li><a href="#">Returns</a></li>
                            <li><a href="#">Shipping</a></li>
                            <li><a href="#">Terms and conditions</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul><!-- End .widget-list -->
                    </div><!-- End .widget -->
                </div><!-- End .col-sm-6 col-lg-3 -->

                <div class="col-sm-6 col-lg-3">
                    <div class="widget">
                        <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                        <ul class="widget-list">
                            <li><a href="#">Sign In</a></li>
                            <li><a href="cart.html">View Cart</a></li>
                            <li><a href="#">My Wishlist</a></li>
                            <li><a href="#">Track My Order</a></li>
                            <li><a href="#">Help</a></li>
                        </ul><!-- End .widget-list -->
                    </div><!-- End .widget -->
                </div><!-- End .col-sm-6 col-lg-3 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .footer-middle -->

    <div class="footer-bottom">
        <div class="container">
            <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p><!-- End .footer-copyright -->
            <figure class="footer-payments">
                <img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
            </figure><!-- End .footer-payments -->
        </div><!-- End .container -->
    </div><!-- End .footer-bottom -->
</footer><!-- End .footer -->

    
</div><!-- End .page-wrapper -->


<button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

<!-- Mobile Menu -->
<div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

<div class="mobile-menu-container">
    <div class="mobile-menu-wrapper">
        <span class="mobile-menu-close"><i class="icon-close"></i></span>

        <form action="#" method="get" class="mobile-search">
            <label for="mobile-search" class="sr-only">Search</label>
            <input type="search" class="form-control" name="mobile-search" id="mobile-search" placeholder="Search in..." required>
            <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
        </form>
        
        <nav class="mobile-nav">
            <ul class="mobile-menu">
                <li class="active">
                    <a href="index.html">Home</a>

                    <ul>
                        <li><a href="index-1.html">01 - furniture store</a></li>
                        <li><a href="index-2.html">02 - furniture store</a></li>
                        <li><a href="index-3.html">03 - electronic store</a></li>
                        <li><a href="index-4.html">04 - electronic store</a></li>
                        <li><a href="index-5.html">05 - fashion store</a></li>
                        <li><a href="index-6.html">06 - fashion store</a></li>
                        <li><a href="index-7.html">07 - fashion store</a></li>
                        <li><a href="index-8.html">08 - fashion store</a></li>
                        <li><a href="index-9.html">09 - fashion store</a></li>
                        <li><a href="index-10.html">10 - shoes store</a></li>
                        <li><a href="index-11.html">11 - furniture simple store</a></li>
                        <li><a href="index-12.html">12 - fashion simple store</a></li>
                        <li><a href="index-13.html">13 - market</a></li>
                        <li><a href="index-14.html">14 - market fullwidth</a></li>
                        <li><a href="index-15.html">15 - lookbook 1</a></li>
                        <li><a href="index-16.html">16 - lookbook 2</a></li>
                        <li><a href="index-17.html">17 - fashion store</a></li>
                        <li><a href="index-18.html">18 - fashion store (with sidebar)</a></li>
                        <li><a href="index-19.html">19 - games store</a></li>
                        <li><a href="index-20.html">20 - book store</a></li>
                        <li><a href="index-21.html">21 - sport store</a></li>
                        <li><a href="index-22.html">22 - tools store</a></li>
                        <li><a href="index-23.html">23 - fashion left navigation store</a></li>
                        <li><a href="index-24.html">24 - extreme sport store</a></li>
                    </ul>
                </li>
                <li>
                    <a href="category.html">Shop</a>
                    <ul>
                        <li><a href="category-list.html">Shop List</a></li>
                        <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                        <li><a href="category.html">Shop Grid 3 Columns</a></li>
                        <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                        <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span class="tip tip-hot">Hot</span></span></a></li>
                        <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                        <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                        <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span class="tip tip-new">New</span></span></a></li>
                        <li><a href="cart.html">Cart</a></li>
                        <li><a href="checkout.html">Checkout</a></li>
                        <li><a href="wishlist.html">Wishlist</a></li>
                        <li><a href="#">Lookbook</a></li>
                    </ul>
                </li>
                <li>
                    <a href="product.html" class="sf-with-ul">Product</a>
                    <ul>
                        <li><a href="product.html">Default</a></li>
                        <li><a href="product-centered.html">Centered</a></li>
                        <li><a href="product-extended.html"><span>Extended Info<span class="tip tip-new">New</span></span></a></li>
                        <li><a href="product-gallery.html">Gallery</a></li>
                        <li><a href="product-sticky.html">Sticky Info</a></li>
                        <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                        <li><a href="product-fullwidth.html">Full Width</a></li>
                        <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Pages</a>
                    <ul>
                        <li>
                            <a href="about.html">About</a>

                            <ul>
                                <li><a href="about.html">About 01</a></li>
                                <li><a href="about-2.html">About 02</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="contact.html">Contact</a>

                            <ul>
                                <li><a href="contact.html">Contact 01</a></li>
                                <li><a href="contact-2.html">Contact 02</a></li>
                            </ul>
                        </li>
                        <li><a href="login.html">Login</a></li>
                        <li><a href="faq.html">FAQs</a></li>
                        <li><a href="404.html">Error 404</a></li>
                        <li><a href="coming-soon.html">Coming Soon</a></li>
                    </ul>
                </li>
                <li>
                    <a href="blog.html">Blog</a>

                    <ul>
                        <li><a href="blog.html">Classic</a></li>
                        <li><a href="blog-listing.html">Listing</a></li>
                        <li>
                            <a href="#">Grid</a>
                            <ul>
                                <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Masonry</a>
                            <ul>
                                <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Mask</a>
                            <ul>
                                <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Single Post</a>
                            <ul>
                                <li><a href="single.html">Default with sidebar</a></li>
                                <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="elements-list.html">Elements</a>
                    <ul>
                        <li><a href="elements-products.html">Products</a></li>
                        <li><a href="elements-typography.html">Typography</a></li>
                        <li><a href="elements-titles.html">Titles</a></li>
                        <li><a href="elements-banners.html">Banners</a></li>
                        <li><a href="elements-product-category.html">Product Category</a></li>
                        <li><a href="elements-video-banners.html">Video Banners</a></li>
                        <li><a href="elements-buttons.html">Buttons</a></li>
                        <li><a href="elements-accordions.html">Accordions</a></li>
                        <li><a href="elements-tabs.html">Tabs</a></li>
                        <li><a href="elements-testimonials.html">Testimonials</a></li>
                        <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                        <li><a href="elements-portfolio.html">Portfolio</a></li>
                        <li><a href="elements-cta.html">Call to Action</a></li>
                        <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                    </ul>
                </li>
            </ul>
        </nav><!-- End .mobile-nav -->

        <div class="social-icons">
            <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
            <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
            <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
            <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
        </div><!-- End .social-icons -->
    </div><!-- End .mobile-menu-wrapper -->
</div><!-- End .mobile-menu-container -->

<!-- Sign in / Register Modal -->
<div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"><i class="icon-close"></i></span>
                </button>

                <div class="form-box">
                    <div class="form-tab">
                        <ul class="nav nav-pills nav-fill" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin" role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="false">Register</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="tab-content-5">
                            <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="signin-tab">
                                <form action="#">
                                    <div class="form-group">
                                        <label for="singin-email">Username or email address *</label>
                                        <input type="text" class="form-control" id="singin-email" name="singin-email" required>
                                    </div><!-- End .form-group -->

                                    <div class="form-group">
                                        <label for="singin-password">Password *</label>
                                        <input type="password" class="form-control" id="singin-password" name="singin-password" required>
                                    </div><!-- End .form-group -->

                                    <div class="form-footer">
                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>LOG IN</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>

                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="signin-remember">
                                            <label class="custom-control-label" for="signin-remember">Remember Me</label>
                                        </div><!-- End .custom-checkbox -->

                                        <a href="#" class="forgot-link">Forgot Your Password?</a>
                                    </div><!-- End .form-footer -->
                                </form>
                                <div class="form-choice">
                                    <p class="text-center">or sign in with</p>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <a href="#" class="btn btn-login btn-g">
                                                <i class="icon-google"></i>
                                                Login With Google
                                            </a>
                                        </div><!-- End .col-6 -->
                                        <div class="col-sm-6">
                                            <a href="#" class="btn btn-login btn-f">
                                                <i class="icon-facebook-f"></i>
                                                Login With Facebook
                                            </a>
                                        </div><!-- End .col-6 -->
                                    </div><!-- End .row -->
                                </div><!-- End .form-choice -->
                            </div><!-- .End .tab-pane -->
                            <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                <form action="#">
                                    <div class="form-group">
                                        <label for="register-email">Your email address *</label>
                                        <input type="email" class="form-control" id="register-email" name="register-email" required>
                                    </div><!-- End .form-group -->

                                    <div class="form-group">
                                        <label for="register-password">Password *</label>
                                        <input type="password" class="form-control" id="register-password" name="register-password" required>
                                    </div><!-- End .form-group -->

                                    <div class="form-footer">
                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>SIGN UP</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>

                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="register-policy" required>
                                            <label class="custom-control-label" for="register-policy">I agree to the <a href="#">privacy policy</a> *</label>
                                        </div><!-- End .custom-checkbox -->
                                    </div><!-- End .form-footer -->
                                </form>
                                <div class="form-choice">
                                    <p class="text-center">or sign in with</p>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <a href="#" class="btn btn-login btn-g">
                                                <i class="icon-google"></i>
                                                Login With Google
                                            </a>
                                        </div><!-- End .col-6 -->
                                        <div class="col-sm-6">
                                            <a href="#" class="btn btn-login  btn-f">
                                                <i class="icon-facebook-f"></i>
                                                Login With Facebook
                                            </a>
                                        </div><!-- End .col-6 -->
                                    </div><!-- End .row -->
                                </div><!-- End .form-choice -->
                            </div><!-- .End .tab-pane -->
                        </div><!-- End .tab-content -->
                    </div><!-- End .form-tab -->
                </div><!-- End .form-box -->
            </div><!-- End .modal-body -->
        </div><!-- End .modal-content -->
    </div><!-- End .modal-dialog -->
</div><!-- End .modal -->

<!-- Plugins JS File -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/jquery.hoverIntent.min.js"></script>
<script src="assets/js/jquery.waypoints.min.js"></script>
<script src="assets/js/superfish.min.js"></script>
<script src="assets/js/owl.carousel.min.js"></script>
<script src="assets/js/wNumb.js"></script>
<script src="assets/js/bootstrap-input-spinner.js"></script>
<script src="assets/js/jquery.magnific-popup.min.js"></script>
<script src="assets/js/nouislider.min.js"></script>
<!-- Main JS File -->
<script src="assets/js/main.js"></script>

<script>
// Utility function to update URL and reload page with filters
function updateURLAndReload(params) {
  const url = new URL(window.location.href);
  // Clear existing parameters
  url.search = '';
  
  // Add new parameters
  Object.entries(params).forEach(([key, value]) => {
    if (value !== null && value !== undefined && value !== '') {
      url.searchParams.set(key, value);
    }
  });
  
  // Navigate to new URL
  window.location.href = url.toString();
}

// Handle pagination clicks
function navigateWithFilters(page) {
  if (!page || page < 1) return;
  
  // Get current filter values
  const minPrice = document.getElementById('min-price')?.value || '';
  const maxPrice = document.getElementById('max-price')?.value || '';
  const searchQuery = document.getElementById('q')?.value || '';
  const sortOrder = document.getElementById('sortby')?.value || 'az';
  
  // Get selected categories
  const categoryCheckboxes = document.querySelectorAll('.category-filter:checked');
  const categories = Array.from(categoryCheckboxes)
    .map(cb => cb.value)
    .join(',');

  // Update URL with all current filters and new page
  updateURLAndReload({
    page,
    q: searchQuery,
    category: categories,
    minPrice,
    maxPrice,
    sort: sortOrder
  });
}

// Initialize page on load
document.addEventListener('DOMContentLoaded', function() {
  // Set initial values from URL params
  const params = new URLSearchParams(window.location.search);
  
  // Initialize price inputs
  const minPrice = params.get('minPrice');
  const maxPrice = params.get('maxPrice');
  if (minPrice) document.getElementById('min-price').value = minPrice;
  if (maxPrice) document.getElementById('max-price').value = maxPrice;
  
  // Initialize category checkboxes
  const categories = params.get('category')?.split(',') || [];
  categories.forEach(category => {
    const checkbox = document.querySelector(`.category-filter[value="${category}"]`);
    if (checkbox) checkbox.checked = true;
  });
  
  // Initialize sort select
  const sort = params.get('sort');
  if (sort) document.getElementById('sortby').value = sort;
  
  // Initialize search input
  const search = params.get('q');
  if (search) document.getElementById('q').value = search;
  
 
  // Category filters
  document.querySelectorAll('.category-filter').forEach(checkbox => {
    checkbox.addEventListener('change', () => navigateWithFilters(1));
  });
  
  // Sort select
  document.getElementById('sortby')?.addEventListener('change', () => {
    navigateWithFilters(1);
  });
  
  // Search form
  document.querySelector('form[action="#"]')?.addEventListener('submit', (e) => {
    e.preventDefault();
    navigateWithFilters(1);
  });
});



// Filter products based on price range
function filterProductsByPrice() {
    const minPrice = parseFloat(document.getElementById('min-price').value) || 0;
    const maxPrice = parseFloat(document.getElementById('max-price').value) || Infinity;

    const productCards = document.querySelectorAll(".product-card");
    let visibleCount = 0;

    productCards.forEach(card => {
        const price = extractPrice(card.querySelector('.product-price'));
        if (price >= minPrice && price <= maxPrice) {
            card.style.display = "block";
            visibleCount++;
        } else {
            card.style.display = "none";
        }
    });

    document.getElementById("product-count").textContent = `${visibleCount} of ${productCards.length} Products`;
}

// Call filter function on price change
document.getElementById('min-price').addEventListener('change', filterProductsByPrice);
document.getElementById('max-price').addEventListener('change', filterProductsByPrice);

// Add this helper function at the top
function extractPrice(priceElement) {
    // Get the discounted price (second span element)
    const priceText = priceElement.querySelector('span:nth-child(2)').textContent.trim();
    // Convert price string to number, removing any currency symbols and commas
    return parseFloat(priceText.replace(/[₹,]/g, '')) || 0;
}

function sortProducts(order) {
    const productList = document.getElementById("product-list");
    let productsArray = Array.from(document.querySelectorAll(".product-card"));

    productsArray.sort((a, b) => {
        switch(order) {
            case "price-low":
                const priceA = extractPrice(a.querySelector('.product-price'));
                const priceB = extractPrice(b.querySelector('.product-price'));
                return priceA - priceB;
            case "price-high":
                const priceHighA = extractPrice(a.querySelector('.product-price'));
                const priceHighB = extractPrice(b.querySelector('.product-price'));
                return priceHighB - priceHighA;
            case "az":
                return a.dataset.name.toLowerCase().localeCompare(b.dataset.name.toLowerCase());
            case "za":
                return b.dataset.name.toLowerCase().localeCompare(a.dataset.name.toLowerCase());
            default:
                return 0;
        }
    });

    // Clear and re-append sorted items
    productList.innerHTML = "";
    productsArray.forEach(card => productList.appendChild(card));
}

// Update the existing sort event listener
document.getElementById('sortby')?.addEventListener('change', function() {
    const sortOrder = this.value;
    sortProducts(sortOrder);
    
    // Update URL to persist sort order
    const currentUrl = new URL(window.location.href);
    const params = new URLSearchParams(currentUrl.search);
    params.set('sort', sortOrder);
    
    // Preserve other parameters
    if (params.has('minPrice')) params.set('minPrice', params.get('minPrice'));
    if (params.has('maxPrice')) params.set('maxPrice', params.get('maxPrice'));
    if (params.has('category')) params.set('category', params.get('category'));
    if (params.has('q')) params.set('q', params.get('q'));
    
    window.location.href = `${currentUrl.pathname}?${params.toString()}`;
});

// Initialize sorting on page load
document.addEventListener('DOMContentLoaded', function() {
    const params = new URLSearchParams(window.location.search);
    const sortOrder = params.get('sort') || 'az';
    document.getElementById('sortby').value = sortOrder;
    sortProducts(sortOrder);
});

document.addEventListener("DOMContentLoaded", function () {
const categoryFilters = document.querySelectorAll(".category-filter");
const sortSelect = document.getElementById("sortby");
const clearFiltersBtn = document.getElementById("clear-filters");
const productList = document.getElementById("product-list");
const productCards = document.querySelectorAll(".product-card");
const productCount = document.getElementById("product-count");

function filterProducts() {
    const selectedCategories = Array.from(categoryFilters)
        .filter(checkbox => checkbox.checked)
        .map(checkbox => checkbox.value.trim().toLowerCase()); // Trim whitespace

    let visibleCount = 0;

    productCards.forEach(card => {
        const category = card.dataset.category.trim().toLowerCase(); // Trim whitespace
        if (selectedCategories.length === 0 || selectedCategories.includes(category)) {
            card.style.display = "block";
            visibleCount++;
        } else {
            card.style.display = "none";
        }
    });

    productCount.textContent = `${visibleCount} of ${productCards.length} Products`;
    updateGridLayout();
}

function updateGridLayout() {
    const visibleCards = Array.from(productCards).filter(card => card.style.display !== "none");
    productList.innerHTML = "";
    visibleCards.forEach(card => productList.appendChild(card));
}

function sortProducts(order) {
    let productsArray = Array.from(productCards);
    productsArray.sort((a, b) => {
        const nameA = a.dataset.name.toLowerCase();
        const nameB = b.dataset.name.toLowerCase();
        return order === "az" ? nameA.localeCompare(nameB) : nameB.localeCompare(nameA);
    });

    productList.innerHTML = "";
    productsArray.forEach(card => productList.appendChild(card));
}

categoryFilters.forEach(checkbox => checkbox.addEventListener("change", () => {
    filterProducts();
    sortProducts(sortSelect.value);
}));

sortSelect.addEventListener("change", () => sortProducts(sortSelect.value));

clearFiltersBtn.addEventListener("click", function (e) {
    e.preventDefault();
    categoryFilters.forEach(checkbox => (checkbox.checked = false));
    filterProducts();
    sortProducts(sortSelect.value);
});

filterProducts();
sortProducts(sortSelect.value);
});






// search ==========
const searchInput = document.getElementById("q"); // Search input field
const productCards = document.querySelectorAll(".product-card"); // All product items
const productList = document.getElementById("product-list"); // The container of product items

searchInput.addEventListener("input", function () {
    const searchTerm = searchInput.value.trim().toLowerCase(); // Convert to lowercase
    let filteredProducts = [];

    productCards.forEach(card => {
        const productName = card.dataset.name.trim().toLowerCase(); // Get product name & lowercase
        if (productName.includes(searchTerm)) {
            filteredProducts.push(card);
        } else {
            card.style.display = "none"; // Hide non-matching products
        }
    });

    // Sort alphabetically (case-insensitive)
    filteredProducts.sort((a, b) => {
        let nameA = a.dataset.name.toLowerCase();
        let nameB = b.dataset.name.toLowerCase();
        return nameA.localeCompare(nameB); // Proper case-insensitive sorting
    });

    // Clear and re-append sorted items
    productList.innerHTML = "";
    filteredProducts.forEach(card => {
        card.style.display = "block";
        productList.appendChild(card);
    });
});

// =================================================================


document.addEventListener("DOMContentLoaded", function () {
const message = document.getElementById("maxcount").textContent.trim();

if (message) {
    const popup = document.getElementById("maxcount");
    popup.classList.add("show"); // Show the popup message

    // Hide the popup after 3 seconds
    setTimeout(() => {
        popup.classList.remove("show"); // Hide the popup
    }, 5000); // 3 seconds delay
}

});

document.addEventListener('DOMContentLoaded', function() {
const minPriceInput = document.getElementById('min-price');
const maxPriceInput = document.getElementById('max-price');

// Input validation and synchronization
function validatePriceInputs() {
    let minValue = Number(minPriceInput.value);
    let maxValue = Number(maxPriceInput.value);

    // Ensure values are within bounds
    minValue = Math.max(0, Math.min(minValue, 0));
    maxValue = Math.max(0, Math.min(maxValue, 1000000));

    // Ensure min doesn't exceed max
    if (minValue > maxValue) {
        if (this === minPriceInput) {
            minValue = maxValue;
        } else {
            maxValue = minValue;
        }
    }

    minPriceInput.value = minValue;
    maxPriceInput.value = maxValue;
}

// Add input validation
[minPriceInput, maxPriceInput].forEach(input => {
    input.addEventListener('change', validatePriceInputs);
    input.addEventListener('input', function() {
        let value = Number(this.value);
        if (value < 0) this.value = 0;
        if (value > 1000000) this.value = 1000000;
    });
});


});

document.addEventListener("DOMContentLoaded", function () {
    const categoryFilters = document.querySelectorAll(".category-filter");
    const sortSelect = document.getElementById("sortby");
    const clearFiltersBtn = document.getElementById("clear-filters");

    // Category filter change handler
    categoryFilters.forEach(checkbox => checkbox.addEventListener("change", () => {
        const selectedCategories = Array.from(categoryFilters)
            .filter(cb => cb.checked)
            .map(cb => cb.value);

        // Update URL with selected categories
        const currentUrl = new URL(window.location.href);
        const params = new URLSearchParams(currentUrl.search);

        if (selectedCategories.length > 0) {
            params.set('category', selectedCategories.join(','));
        } else {
            params.delete('category');
        }

        // Preserve other parameters
        if (params.has('q')) params.set('q', params.get('q'));
        if (params.has('minPrice')) params.set('minPrice', params.get('minPrice'));
        if (params.has('maxPrice')) params.set('maxPrice', params.get('maxPrice'));
        if (params.has('sort')) params.set('sort', params.get('sort'));

        // Navigate to new URL
        window.location.href = `${currentUrl.pathname}?${params.toString()}`;
    }));

    // Clear filters
    clearFiltersBtn.addEventListener("click", function (e) {
        e.preventDefault();
        window.location.href = window.location.pathname;
    });

    // Initialize checkboxes based on URL parameters (case-insensitive)
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('category')) {
        const selectedCategories = urlParams.get('category').split(',').map(cat => cat.toLowerCase());
        categoryFilters.forEach(checkbox => {
            if (selectedCategories.includes(checkbox.value.toLowerCase())) {
                checkbox.checked = true;
            }
        });
    }
});



// Add this helper function at the top
function extractPrice(priceElement) {
    // Get the discounted price (second span element)
    const priceText = priceElement.querySelector('span:nth-child(2)').textContent.trim();
    // Convert price string to number, removing any currency symbols and commas
    return parseFloat(priceText.replace(/[₹,]/g, '')) || 0;
}

function sortProducts(order) {
    const productList = document.getElementById("product-list");
    let productsArray = Array.from(document.querySelectorAll(".product-card"));

    productsArray.sort((a, b) => {
        switch(order) {
            case "price-low":
                const priceA = extractPrice(a.querySelector('.product-price'));
                const priceB = extractPrice(b.querySelector('.product-price'));
                return priceA - priceB;
            case "price-high":
                const priceHighA = extractPrice(a.querySelector('.product-price'));
                const priceHighB = extractPrice(b.querySelector('.product-price'));
                return priceHighB - priceHighA;
            case "az":
                return a.dataset.name.toLowerCase().localeCompare(b.dataset.name.toLowerCase());
            case "za":
                return b.dataset.name.toLowerCase().localeCompare(a.dataset.name.toLowerCase());
            default:
                return 0;
        }
    });

    // Clear and re-append sorted items
    productList.innerHTML = "";
    productsArray.forEach(card => productList.appendChild(card));
}

// Update the existing sort event listener
document.getElementById('sortby')?.addEventListener('change', function() {
    const sortOrder = this.value;
    sortProducts(sortOrder);
    
    // Update URL to persist sort order
    const currentUrl = new URL(window.location.href);
    const params = new URLSearchParams(currentUrl.search);
    params.set('sort', sortOrder);
    
    // Preserve other parameters
    if (params.has('minPrice')) params.set('minPrice', params.get('minPrice'));
    if (params.has('maxPrice')) params.set('maxPrice', params.get('maxPrice'));
    if (params.has('category')) params.set('category', params.get('category'));
    if (params.has('q')) params.set('q', params.get('q'));
    
    window.location.href = `${currentUrl.pathname}?${params.toString()}`;
});

// Initialize sorting on page load
document.addEventListener('DOMContentLoaded', function() {
    const params = new URLSearchParams(window.location.search);
    const sortOrder = params.get('sort') || 'az';
    document.getElementById('sortby').value = sortOrder;
    sortProducts(sortOrder);
});

// Functionality for the Apply button
document.getElementById('apply-price').addEventListener('click', function() {
    const minPrice = parseFloat(document.getElementById('min-price').value) || 0;
    const maxPrice = parseFloat(document.getElementById('max-price').value) || Infinity;

    // Get selected categories
    const categoryCheckboxes = document.querySelectorAll('.category-filter:checked');
    const selectedCategories = Array.from(categoryCheckboxes).map(cb => cb.value);

    // Update URL with filters
    const params = new URLSearchParams(window.location.search);
    params.set('minPrice', minPrice);
    params.set('maxPrice', maxPrice);
    if (selectedCategories.length > 0) {
        params.set('category', selectedCategories.join(','));
    } else {
        params.delete('category');
    }

    // Navigate to new URL
    window.location.href = `${window.location.pathname}?${params.toString()}`;
});

// Function to filter products based on selected categories and price range
function filterProducts() {
    const minPrice = parseFloat(document.getElementById('min-price').value) || 0;
    const maxPrice = parseFloat(document.getElementById('max-price').value) || Infinity;

    const categoryCheckboxes = document.querySelectorAll('.category-filter:checked');
    const selectedCategories = Array.from(categoryCheckboxes).map(cb => cb.value);

    const productCards = document.querySelectorAll(".product-card");
    let visibleCount = 0;

    productCards.forEach(card => {
        const price = extractPrice(card.querySelector('.product-price'));
        const category = card.dataset.category;

        // Check if the product matches the selected categories and price range
        const isCategoryMatch = selectedCategories.length === 0 || selectedCategories.includes(category);
        const isPriceMatch = price >= minPrice && price <= maxPrice;

        if (isCategoryMatch && isPriceMatch) {
            card.style.display = "block";
            visibleCount++;
        } else {
            card.style.display = "none";
        }
    });

    document.getElementById("product-count").textContent = `${visibleCount} of ${productCards.length} Products`;
}

// Call filter function on price change
document.getElementById('min-price').addEventListener('change', filterProducts);
document.getElementById('max-price').addEventListener('change', filterProducts);

// Call filter function on category change
document.querySelectorAll('.category-filter').forEach(checkbox => {
    checkbox.addEventListener('change', filterProducts);
});

// Initialize filtering on page load
document.addEventListener('DOMContentLoaded', filterProducts);

// Function to check if a product matches all current filters
function doesProductMatchFilters(card) {
    const searchTerm = document.getElementById("q").value.trim().toLowerCase();
    const productName = card.dataset.name.trim().toLowerCase();
    const category = card.dataset.category.trim().toLowerCase();
    const price = extractPrice(card.querySelector('.product-price'));
    
    // Get selected categories
    const selectedCategories = Array.from(document.querySelectorAll(".category-filter:checked"))
        .map(checkbox => checkbox.value.trim().toLowerCase());
    
    // Get price range
    const minPrice = parseFloat(document.getElementById('min-price').value) || 0;
    const maxPrice = parseFloat(document.getElementById('max-price').value) || Infinity;
    
    // Check if matches all conditions
    const matchesSearch = searchTerm === '' || productName.includes(searchTerm);
    const matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(category);
    const matchesPrice = price >= minPrice && price <= maxPrice;
    
    return matchesSearch && matchesCategory && matchesPrice;
}

// Function to update product visibility and count
function updateProductVisibility() {
    const productCards = document.querySelectorAll(".product-card");
    const productList = document.getElementById("product-list");
    let visibleCount = 0;
    let visibleProducts = [];

    productCards.forEach(card => {
        if (doesProductMatchFilters(card)) {
            card.style.display = "block";
            visibleProducts.push(card);
            visibleCount++;
        } else {
            card.style.display = "none";
        }
    });

    // Update product count
    document.getElementById("product-count").textContent = `${visibleCount} of ${productCards.length} Products`;

    // Sort visible products if needed
    const sortOrder = document.getElementById("sortby").value;
    visibleProducts.sort((a, b) => {
        switch(sortOrder) {
            case "price-low":
                return extractPrice(a.querySelector('.product-price')) - extractPrice(b.querySelector('.product-price'));
            case "price-high":
                return extractPrice(b.querySelector('.product-price')) - extractPrice(a.querySelector('.product-price'));
            case "az":
                return a.dataset.name.toLowerCase().localeCompare(b.dataset.name.toLowerCase());
            case "za":
                return b.dataset.name.toLowerCase().localeCompare(a.dataset.name.toLowerCase());
            default:
                return 0;
        }
    });

    // Clear and re-append sorted visible products
    productList.innerHTML = "";
    visibleProducts.forEach(card => productList.appendChild(card));
}

// Update event listeners
document.addEventListener("DOMContentLoaded", function() {
    // Search input listener
    const searchInput = document.getElementById("q");
    searchInput.addEventListener("input", updateProductVisibility);

    // Category filter listeners
    document.querySelectorAll(".category-filter").forEach(checkbox => {
        checkbox.addEventListener("change", updateProductVisibility);
    });

    // Price input listeners
    document.getElementById('min-price').addEventListener('change', updateProductVisibility);
    document.getElementById('max-price').addEventListener('change', updateProductVisibility);

    // Sort select listener
    document.getElementById('sortby').addEventListener('change', updateProductVisibility);

    // Apply price button listener
    document.getElementById('apply-price').addEventListener('click', updateProductVisibility);

    // Clear filters listener
    document.getElementById("clear-filters").addEventListener("click", function(e) {
        e.preventDefault();
        // Reset all filters
        document.querySelectorAll(".category-filter").forEach(checkbox => checkbox.checked = false);
        document.getElementById('min-price').value = '';
        document.getElementById('max-price').value = '';
        document.getElementById("q").value = '';
        document.getElementById("sortby").value = 'az';
        updateProductVisibility();
    });

    // Initial update
    updateProductVisibility();
});
</script>

</body>


<!-- molla/category-4cols.html  22 Nov 2019 10:02:55 GMT -->
</html>

