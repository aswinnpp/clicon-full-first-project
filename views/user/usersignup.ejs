<%- include('../partials/user/header') %> 

<div class="container3 mt-3">
    <div class="auth-wrapper">
      <ul class="nav nav-tabs mb-3" id="auth-tab" role="tablist">
        <li class="nav-item" role="presentation">
        <form action="./signup">
          <button
            class="nav-link active"
            id="sign-up-tab"
            data-bs-toggle="tab"
            data-bs-target=""
            type="submit"
            role="tab"
            aria-controls="sign-up"
            aria-selected="true"
          >
            Sign up
          </button>
        </form>
          
     
        </li>
        <li class="nav-item" role="presentation">
         <form action="./signin" method="get">
  
          <button
          class="nav-link"
          id="sign-in-tab"
          type="submit"
          role="tab"
          aria-controls="sign-in"
          aria-selected="false"
        >
          Sign in
        </button>
         </form>
          
        </li>
      </ul>
      <div class="tab-content" id="auth-tabContent">
          <!-- Sign Up Form -->
          <div
            class="tab-pane fade show active"
            id="sign-up"
            role="tabpanel"
            aria-labelledby="sign-up-tab"
          >
          <p style="color: red;"><%= typeof message !== 'undefined' ? message : '' %></p>
          <form action="/signup" method="post">
              <div class="mb-3">
                <label for="sign-up-name" class="form-label">Name</label>
                <input
                  type="text",
                  name="name"
                  class="form-control"
                  id="sign-up-name"
                  placeholder="Enter your name"
                />
              </div>
              <div class="mb-3">
                <label for="sign-up-email" class="form-label"
                  >Email address</label
                >
                <input
                  type="email",
                  name="email"
                  class="form-control"
                  id="sign-up-email"
                  placeholder="Enter your email"
                />
              </div>
              <div class="mb-3">
                <label for="sign-up-email" class="form-label"
                  >Phone no</label
                >
                <input
                  style="appearance: none;" 
                  maxlength="10" 
                  pattern="[0-9]{10}" 
                  oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                  name="phone"
                  class="form-control"
                  id="sign-up-num"
                  placeholder="Enter your mobile no."
                />
              </div>
              <div class="mb-3">
                <label for="sign-up-password" class="form-label"
                  >Password</label
                >
                <input
                  type="password",
                  name="password"
                  class="form-control"
                  id="sign-up-password"
                  placeholder="Enter your password"
                />
              </div>
              <div class="mb-3">
                <label for="sign-up-confirm-password" class="form-label"
                  >Confirm Password</label
                >

                <input
                  type="password",
                  name="Confirm-password"
                  class="form-control"
                  id="sign-up-confirm-password"
                  placeholder="Confirm your password"
                />
              </div>
              
              
              <button type="submit" class="btn btn-primary">Sign Up</button>
            </form>
            <div class="container ">
              <button class="google-btn d-flex align-items-center justify-content-center mt-3 ms-3">
                  <img src="/images/google icon.png" alt="Google logo">
                  <span class="text-secondary">Sign in with Google</span>
              </button>
          </div>
          </div>
        
        </div>
      </div>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", () => {
  const signUpForm = document.querySelector("#sign-up form");

  signUpForm.addEventListener("submit", (event) => {
    event.preventDefault();

    const name = document.getElementById("sign-up-name").value.trim();
    const email = document.getElementById("sign-up-email").value.trim();
    const password = document.getElementById("sign-up-password").value.trim();
    const confirmPassword = document.getElementById("sign-up-confirm-password").value.trim();
  
    const phoneInput = document.getElementById('sign-up-num');
    const errorMsg = document.getElementById('phone-error');
    const phone = phoneInput.value;

  

    
    if (name === "") {
      Swal.fire("Name is required.");
      return;
    }


    if (email === "") {
      Swal.fire("Email is required.");
      return;
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      Swal.fire("Invalid email address.");
      return;
    }

 
    if (password === "" ||
        password.length < 6 ||
        !/(?=.*[a-z])/.test(password) ||
        !/(?=.*[A-Z])/.test(password) ||
        !/(?=.*[0-9])/.test(password) ||
        !/(?=.*[!@#$%^&*()_+\-=[\]{};':\"\\|,.<>\/?])/.test(password)) {
        Swal.fire(
        "Password must:\n" +
        "- Be at least 6 characters long\n" +
        "- Contain one lowercase letter\n" +
        "- Contain one uppercase letter\n" +
        "- Contain one number\n" +
        "- Contain one special character"
      );
      return;
    }

   
    if (confirmPassword === "") {
      Swal.fire("Confirm password is required.");
      return;
    } else if (password !== confirmPassword) {
      Swal.fire("Passwords do not match.");
      return;
    }

    // Terms validation


    // Display errors or submit form
    
    if (phone.length !== 10) {
      swal.fire( 'Enter a valid 10-digit phone number.')
    } else {
      signUpForm.submit(); 
    }
  });
});

 

   

    </script>
    <%- include('../partials/user/footer') %>
 
